var Storage={};Storage.storeNote=function(t){var e="",o=Storage.getNoteList();if(t.id){e=t.id;var r=Storage.getNote(t.id),a=r.category;a!=t.category&&(Storage.removeNoteFromCategory(t.id,a),Storage.addNoteToCategory(t.id,t.category));for(var g=0;g<o.length;g++)if(o[g].id==t.id){o[g].category=t.category,o[g].title=t.title;break}localStorage.setItem("note_"+t.id,JSON.stringify(t))}else t.id=(new Date).valueOf(),e=t.id,localStorage.setItem("note_"+t.id,JSON.stringify(t)),o.push({title:t.title,category:t.category,type:t.type,id:t.id,createTime:t.createTime}),Storage.addNoteToCategory(t.id,t.category);return Storage.storeNoteList(o),e},Storage.storeNoteList=function(t){localStorage.setItem("notelist",JSON.stringify(t))},Storage.getNoteList=function(t){var e,o=[];return t?(e=localStorage.getItem("notebook_"+t),e&&(o=JSON.parse(e))):(e=localStorage.getItem("notelist"),e&&(o=JSON.parse(e))),o},Storage.getNote=function(t){var e,o=localStorage.getItem("note_"+t);return e=o?JSON.parse(o):null},Storage.getNoteContent=function(t){var e=Storage.getNote(t);return e.content},Storage.getNoteCategory=function(t){var e=Storage.getNote(t);return e.category},Storage.deleteNote=function(t){var e=Storage.getNote(t),o=Storage.getNoteList();if(o&&o!=[]){for(var r=0;r<o.length&&o[r].id!=t;r++);o.splice(r,1),Storage.storeNoteList(o);var a=Storage.getNoteList(e.category);for(r=0;r<a.length&&a[r]!=t;r++);a.splice(r,1),Storage.storeCategory(e.category,a),localStorage.removeItem("note_"+t)}},Storage.addNoteBook=function(t){var e=Storage.getNoteBookList();-1==e.indexOf(t)&&(e.push(t),localStorage.setItem("notebook",JSON.stringify(e)))},Storage.getNoteBookList=function(){var t=localStorage.getItem("notebook");return t?JSON.parse(t):[]},Storage.addNoteToCategory=function(t,e){var o=Storage.getNoteList(e);o.push(t),localStorage.setItem("notebook_"+e,JSON.stringify(o));var r=Storage.getCategoryList();if(r){var a=r.indexOf(e);-1==a&&r.push(e)}else r=[],r.push(e);localStorage.setItem("notebook",JSON.stringify(r))},Storage.removeNoteFromCategory=function(t,e){var o=Storage.getNoteList(e);if(o){for(var r=0;r<o.length&&o[r]!=t;r++);r!=o.length&&o.splice(r,1),localStorage.setItem("notebook_"+e,JSON.stringify(o))}},Storage.getCategoryList=function(){var t=localStorage.getItem("notebook");return t?JSON.parse(t):[]},Storage.storeCategoryList=function(t){localStorage.setItem("notebook",JSON.stringify(t))},Storage.storeCategory=function(t,e){localStorage.setItem("notebook_"+t,JSON.stringify(e))},Storage.deleteNoteBook=function(t){var e=Storage.getNoteList(t),o=Storage.getCategoryList(t),r=o.indexOf(t);-1!=r&&(o.splice(r,1),Storage.storeCategoryList(o));var a=Storage.getNoteList("notebook_未分类")||[];e.forEach(function(t,e){var o=Storage.getNote(t);o.category="未分类",Storage.storeNote(o),a.push(t)}),Storage.storeCategory("未分类",a)},Storage.renameNoteBook=function(t,e){var o=Storage.getCategoryList(),r=o.indexOf(t);-1!=r?o.splice(r,1,e):o.push(e),Storage.storeCategoryList(o);var a=Storage.getNoteList();if(a)for(var g=0;g<a.length;g++)a[g].category==t&&(a[g].category=e);Storage.storeNoteList(a),a=Storage.getNoteList(t),localStorage.removeItem("notebook_"+t);var i=localStorage.getItem(e);if(a.forEach(function(t){var o=Storage.getNote(t);o.category=e,Storage.storeNote(o)}),i){var n=JSON.parse(i);a.forEach(function(t){n.push(t)}),Storage.storeCategory(e,n)}else Storage.storeCategory(e,a)},Storage.init=function(){if(0===Storage.getNoteList().length){var t="```javascript\nfunction (id,category){\n	var list = Storage.getNoteList(category);\n	list.push(id);\n	localStorage.setItem('notebook_'+category,JSON.stringify(list));\n	var categorys =  Storage.getCategoryList();\n	if(!categorys){\n		categorys = [];\n		categorys.push(category);\n	}else{\n		var index = categorys.indexOf(category);\n		if(index == -1){\n			categorys.push(category);\n		}\n	}\n	localStorage.setItem('notebook',JSON.stringify(categorys));\n}\n```",e="代码高亮",o="js",r=new Note(e,t,o,"text");Storage.storeNote(r),e="多谢查看demo",t="希望大家多多指教",o="未分类",r=new Note(e,t,o,"text"),Storage.storeNote(r)}};